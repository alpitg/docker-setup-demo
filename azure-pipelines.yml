trigger:
  - master
pool:
  vmImage: 'ubuntu-latest'

stages:

  - stage: Build
    jobs:
      - job: NpmInstall
        steps:
          - bash: echo "npm install"
          - task: Npm@1
            inputs:
              command: 'install'

      - job: NpmPublish
        steps:
          - task: Npm@1
            inputs:
              command: 'publish'
          - task: ArchiveFiles@2
            inputs:
              rootFolderOrFile: '$(Build.BinariesDirectory)'
              includeRootFolder: true
              archiveType: 'zip'
              archiveFile: '$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip'
              replaceExistingArchive: true
          - task: PublishBuildArtifacts@1
            inputs:
              PathtoPublish: '$(Build.ArtifactStagingDirectory)'
              ArtifactName: 'drop'
              publishLocation: 'Container'

  - stage: QA
    dependsOn: Build
    jobs: 
      - job: A

  - stage: UAT
    dependsOn: Build
    jobs:
      - job: A
      - job: B


